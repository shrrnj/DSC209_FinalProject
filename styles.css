:root{
    --bg:#fff; --panel:#f7f8fb; --ink:#111; --muted:#5d6778; --grid:#d6dae2; --shadow:rgba(0,0,0,.08);
    --chip-bg:#ffffff; --chip-border:#d9dee8;
  }
  @media (prefers-color-scheme: dark){
    :root{
      --bg:#0b0d12; --panel:#121620; --ink:#e9edf3; --muted:#93a2b5; --grid:#2b3241; --shadow:rgba(0,0,0,.35);
      --chip-bg:#151a25; --chip-border:#334055;
    }
  }
  
  *{box-sizing:border-box}
  body{margin:0; font:14px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; color:var(--ink); background:var(--bg);}
  .wrap{max-width:1100px; margin:24px auto; padding:0 16px;}
  .top h1{margin:0 0 4px; font-size:22px}
  .sub{margin:0 0 12px; color:var(--muted)}
  
  .controls{display:flex; gap:14px; flex-wrap:wrap; align-items:end; margin-bottom:10px}
  label{color:var(--muted); font-size:13px; display:flex; gap:8px; align-items:center}
  select{accent-color:#3b82f6}
  
  /* Chips */
  .chipbar{display:flex; gap:8px; flex-wrap:wrap; margin:2px 0 12px}
  .chip{
    display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; cursor:pointer;
    background:var(--chip-bg); border:1px solid var(--chip-border); user-select:none;
  }
  .chip .sw{width:10px; height:10px; border-radius:3px; background:#9aa4b2}
  .chip.active{outline:2px solid #3b82f6; outline-offset:1px}
  .chipnote{margin:0 0 8px; color:var(--muted); font-size:12px}
  
  /* Card + legend + chart */
  .card{background:var(--panel); border:1px solid color-mix(in srgb, var(--grid) 80%, transparent); border-radius:16px; padding:12px}
  h2{margin:0 0 6px; font-size:16px}
  .note{color:var(--muted); font-size:12px; margin:8px 0 0}
  
  .legend{display:flex; flex-wrap:wrap; gap:8px; margin:2px 0 6px}
  .legend .item{display:flex; gap:6px; align-items:center; padding:4px 8px; border:1px solid color-mix(in srgb, var(--grid) 80%, transparent); border-radius:999px; background:color-mix(in srgb, var(--panel) 85%, white 15%);}
  .sw{width:12px; height:12px; border-radius:3px; display:inline-block}
  
  svg{width:100%; height:auto; display:block}
  .axis text{fill:var(--muted); font-size:11px}
  .axis path,.axis line{stroke:var(--grid)}
  
  /* Tooltip */
  .tooltip{
    position:fixed; pointer-events:none;
    background:color-mix(in srgb, var(--panel) 85%, black 15%); color:var(--ink);
    border:1px solid color-mix(in srgb, var(--grid) 70%, transparent);
    border-radius:10px; padding:8px 10px; font-size:12px; box-shadow:0 8px 24px var(--shadow);
    opacity:0; transform:translate3d(0,0,0);
    max-width:320px; z-index:999;
  }

.legend-group text {
  font-size: 12px;
  alignment-baseline: middle;
}

/* Line chart section */
#chartContinent {
  width: 100%;
  height: auto;
  display: block;
  margin-top: 8px;
}

.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

#gasDropdown {
  font-size: 14px;
  padding: 4px 8px;
}

/* Tooltip for line chart */
.tooltip {
  position: absolute;
  pointer-events: none;
  background: white;
  border: 1px solid #ccc;
  padding: 6px 8px;
  border-radius: 6px;
  font-size: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  opacity: 0;
  transition: opacity 0.2s ease;
}

.subtitle {
  font-size: 13px;
  color: var(--muted);
  margin: 2px 0 6px 0;
  text-align: left;
}

line.axis {
  stroke: #999;
  stroke-width: 1px;
  stroke-dasharray: 2,2;
}

path.subregion {
  fill: none;
  stroke-width: 2px;
}

body { font-family: sans-serif; background: #fafafa; margin:0; padding:20px;}
svg { width: 100%; height: 500px; display:block; margin:auto; }
select { margin: 10px; padding: 4px 8px; font-size: 14px; }
.tooltip {
  position: fixed; pointer-events: none;
  background: rgba(255,255,255,0.9); border: 1px solid #aaa; border-radius:6px;
  padding:6px 10px; font-size:12px; opacity:0; box-shadow:0 4px 12px rgba(0,0,0,0.15);
}
/* Race chart styles */
body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  margin: 20px;
  background: #f5f5f5;
}

h1 {
  text-align: center;
  margin-bottom: 20px;
}

#chart-container {
  max-width: 900px;
  margin: 0 auto;
  background: white;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

#chart {
  width: 100%;
  height: 500px;
}

#controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 10px;
  margin-top: 10px;
}

#controls button {
  padding: 6px 16px;
  border-radius: 999px;
  border: none;
  background: #333;
  color: #fff;
  cursor: pointer;
  font-size: 14px;
}

#controls button:hover {
  opacity: 0.9;
}

#year-label {
  font-weight: bold;
  font-size: 20px;
  margin-left: 10px;
}

#note {
  text-align: center;
  font-size: 12px;
  color: #666;
  margin-top: 8px;
}
.radial-bar {
  stroke: #fff;
  stroke-width: 1px;
}

.radial-bar:hover {
  opacity: 1;
}

.radial-label {
  pointer-events: none;
}


/* ---- Heatmap styles ---- */
.heat-cell {
  stroke: #f8fafc;
  stroke-width: 0.5px;
}

.heatmap-legend text {
  fill: var(--muted);
}

/* ---- Lorenz curve styles ---- */
.lorenz-eq {
  fill: none;
  stroke: var(--grid);
  stroke-width: 1.5px;
  stroke-dasharray: 4 3;
}

.lorenz-curve {
  fill: none;
  stroke: #2563eb; 
  stroke-width: 2.5px;
}

.lorenz-shade {
  fill: rgba(37, 99, 235, 0.15);
  stroke: none;
}
.card {
  background: white;
  padding: 2rem;
  border-radius: 18px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.06); 
  margin-bottom: 3rem;
}
.wrap {
  max-width: 900px;
  margin: auto;
  padding: 2rem 1.5rem;
}

.top h1 {
  margin-bottom: 1rem;
}

.top p {
  line-height: 1.65;
}
body {
  background: linear-gradient(180deg, #fafafa 0%, #f3f3f7 100%);
  font-family: "Inter", sans-serif;
}
.card .header h2 {
  font-weight: 600;
  font-size: 1.3rem;
  margin-bottom: 0.75rem;
}

.card .header::after {
  content: "";
  display: block;
  height: 3px;
  width: 60px;
  background: #d8d8ff;
  border-radius: 3px;
  margin-top: 0.4rem;
}
.card {
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.card:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 24px rgba(0,0,0,0.12);
}
.note em {
  background: #eef0ff;
  padding: 0.2rem 0.45rem;
  border-radius: 6px;
  font-style: normal;
  font-weight: 500;
}
.note {
  border-left: 4px solid #e3e5ff;
  padding-left: 12px;
}
.top {
  padding: 2.5rem 1rem 2rem 1rem;
  border-radius: 20px;
  background: linear-gradient(180deg, #f7f7ff 0%, #fafaff 100%);
  box-shadow: 0 4px 18px rgba(0,0,0,0.05);
  margin-bottom: 2.5rem;
}

.top h1 {
  position: relative;
  display: inline-block;
  padding-bottom: 0.5rem;
}

.top h1::after {
  content: "";
  display: block;
  width: 80px;
  height: 4px;
  background: #d8d8ff;
  border-radius: 4px;
  margin-top: 0.4rem;
}