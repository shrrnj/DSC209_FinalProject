<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>GHG · Snapshot — Multi-Year Chips</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="stylesheet" href="./styles.css?v=5" />
</head>
<body>
  <main class="wrap">
    <header class="top">
      <h1>GHG · Snapshot — Region × (Industry | Gas)</h1>
      <p class="sub">
        Pick a region, choose <b>Industries</b> or <b>Gases</b>, then select one or more <b>years</b> below.
        Stacks show the opposite dimension. Values are summed over selected years.
      </p>
    </header>

    <section class="controls">
      <label>Region
        <select id="regionSel">
          <option>Advanced Economies</option>
          <option>Africa</option>
          <option>Americas</option>
          <option>Asia</option>
          <option>Australia and New Zealand</option>
          <option>Central Asia</option>
          <option>Eastern Asia</option>
          <option>Eastern Europe</option>
          <option>Emerging and Developing Economies</option>
          <option>Europe</option>
          <option>G20</option>
          <option>G7</option>
          <option>Latin America and the Caribbean</option>
          <option>Northern Africa</option>
          <option>Northern America</option>
          <option>Northern Europe</option>
          <option>Oceania</option>
          <option>Other Oceania sub-regions</option>
          <option>South-eastern Asia</option>
          <option>Southern Asia</option>
          <option>Southern Europe</option>
          <option>Sub-Saharan Africa</option>
          <option>Western Asia</option>
          <option>Western Europe</option>
          <option selected>World</option>
        </select>
      </label>

      <label>Compare by
        <select id="modeSel">
          <option value="industry">Industry</option>
          <option value="gas">Gas</option>
        </select>
      </label>
    </section>

    <section>
      <div class="chipbar" id="yearChips" aria-label="Select one or more years"></div>
      <p class="chipnote" id="yearsSummary"></p>
    </section>

    <section class="card">
      <h2 id="snapTitle">Snapshot</h2>
      <div id="legendMain" class="legend"></div>
      <svg id="chartMain" viewBox="0 0 960 560" aria-label="Stacked horizontal bars"></svg>
      <p class="note">Hover for details. Values are the <b>sum</b> across selected years.</p>
    </section>

    <section class="card">
      <div class="header">
        <h2>Global Gas Emissions by Continent: Asia Leads Across All Gas Types</h2>
        <div>
          <label for="gasDropdown">Gas Type:</label>
          <select id="gasDropdown"></select>
        </div>
      </div>
      <svg id="chartContinent" viewBox="0 0 800 500" preserveAspectRatio="xMidYMid meet"></svg>
      <p>From this analysis, we can see that Asia is the leader for gas omissions in all gas types - let us focus in on the Asia sub-regions.</p>
    </section>

    <section class="card">
      <div class="header">
        <h2 style="text-align:left;">Gas Emissions in Asian Subregions — Streamgraph</h2>
        <label>Gas Type:
          <select id="gasDropdownSubregion"></select>
        </label>
      </div>

      <svg id="streamSubregion" width="800" height="500"></svg>
      <div id="tooltip" class="tooltip" style="opacity:0"></div>
      <p>From this analysis, we can see that Eastern Asia is the leader from Asia aside from Fluorinated gases where Southern Asia is the leader there. It can be interesting to look into factors that may lead to these trends. </p>
    </section>

    <!-- Radial stacked bars -->
    <section class="card">
      <div class="header">
        <h2>Asian Subregions · Industry Composition (Radial Stacked Bars)</h2>
        <div id="radialControls" class="mini-controls">
          <button id="radialPlay">Play</button>
          <button id="radialPause">Pause</button>
        </div>
      </div>

      <div id="radialLegend" class="legend"></div>
      <svg id="chartRadialAsia" viewBox="0 0 720 720" preserveAspectRatio="xMidYMid meet"></svg>
      <p class="note">
        Each arc represents an Asian subregion. The radius encodes total greenhouse gas emissions for that year,
        while colors show how much each industry contributes within that subregion.
        Use Play to step through years automatically and compare how different subregions grow over time.
      </p>
    </section>

    <!-- NEW: Stacked bar chart -->
    <section class="card">
      <div class="header">
        <h2>Asian Subregions · Industry Composition (Stacked Bars)</h2>
        <div id="asiaBarControls" class="mini-controls">
          <button id="asiaBarPlay">Play</button>
          <button id="asiaBarPause">Pause</button>
        </div>
      </div>

      <div id="asiaBarLegend" class="legend"></div>

      <svg id="asiaBarChart" viewBox="0 0 900 420" preserveAspectRatio="xMidYMid meet"></svg>

      <p class="note">
        Each bar represents an Asian subregion. Bar length shows total greenhouse gas emissions for that year,
        while colors show how much each industry contributes within the subregion. Use Play to step through years
        automatically and compare how the composition and scale change across time.
      </p>
    </section>

    <section class="card">
      <div class="header">
        <h2>Industry Greenhouse Gas Emissions — Bar Chart Race (2010–2023)</h2>
      </div>

      <div id="raceControls" class="controls">
        <button id="racePlay">Play</button>
        <button id="racePause">Pause</button>
        <span id="raceYearLabel"></span>
      </div>

      <svg id="chartRace" viewBox="0 0 960 560" preserveAspectRatio="xMidYMid meet"></svg>
      <p class="note">
        Animated chart race showing total greenhouse gas emissions by major industries from 2010–2023. The chart highlights which sectors consistently contribute the most to global greenhouse gas output and reveals how their emissions have changed over time. This provides a comparative view of global industry trends and helps identify the sectors with the largest environmental impact.
      </p>
    </section>

    <!-- Heatmap -->
    <section class="card">
      <h2>Emissions Hotspots · Industries × Asian Subregions (Greenhouse Gas, 2023)</h2>
      <svg id="heatmapIndustries" viewBox="0 0 800 420" preserveAspectRatio="xMidYMid meet"></svg>
      <p class="note">
        Each cell shows total greenhouse gas emissions (MtCO₂e) for an industry–Asian subregion pair in 2023.
        Darker squares indicate sectors that dominate that subregion’s footprint.
      </p>
    </section>

    <!-- Lorenz curve -->
    <section class="card">
      <h2>Carbon Inequality · Lorenz Curve by Region (Greenhouse Gas, 2023)</h2>
      <svg id="lorenzCurve" viewBox="0 0 520 420" preserveAspectRatio="xMidYMid meet"></svg>
      <p class="note">
        Regions are sorted from lowest to highest emissions. If every region emitted equally,
        the curve would follow the diagonal line. The farther the blue curve bows below that line,
        the more unequal emissions are across regions.
      </p>
    </section>
  
  </main>

  <div id="tooltip" class="tooltip" style="opacity:0"></div>

  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <script defer src="./app.js?v=5"></script>
  <script defer src="./race.js"></script>
  <script defer src="./static_charts.js"></script>
  <script defer src="./radial_asia.js"></script>
  <script defer src="./asia_bar.js"></script>
</body>
</html>